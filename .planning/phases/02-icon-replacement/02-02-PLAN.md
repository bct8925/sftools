---
phase: 02-icon-replacement
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified: [src/components/button-icon/button-icon.js, src/components/button-icon/button-icon.css]
autonomous: true
---

<objective>
Update button-icon component to support SLDS SVG icons via data-icon attribute.

Purpose: Enable button-icon to render SLDS icons instead of HTML character entities for visual consistency.
Output: Enhanced button-icon component that accepts a data-icon attribute referencing icons from icons.js.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-icon-replacement/02-01-SUMMARY.md
@src/components/button-icon/button-icon.js
@src/components/button-icon/button-icon.css
@src/lib/icons.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add data-icon attribute support to button-icon</name>
  <files>src/components/button-icon/button-icon.js</files>
  <action>
  Modify button-icon.js to support a new `data-icon` attribute that references icons from icons.js:

  1. Import icons from icons.js:
     ```javascript
     import { icons } from '../../lib/icons.js';
     ```

  2. Add 'data-icon' to observedAttributes (alongside existing 'icon', 'title', 'disabled')

  3. Update render() method to check for data-icon first:
     ```javascript
     // Check data-icon (SLDS) first, fall back to icon (HTML entity)
     const dataIcon = this.getAttribute('data-icon');
     const iconContent = dataIcon && icons[dataIcon]
         ? icons[dataIcon]
         : (this.getAttribute('icon') || '&#8942;');
     ```

  4. Add updateDataIcon() method similar to updateIcon() for attribute changes

  This maintains backward compatibility: existing `icon="&#128337;"` still works, but `data-icon="clock"` uses SLDS.
  </action>
  <verify>npm run build succeeds</verify>
  <done>button-icon accepts data-icon attribute and renders SLDS icons</done>
</task>

<task type="auto">
  <name>Task 2: Ensure SVG styling in button-icon CSS</name>
  <files>src/components/button-icon/button-icon.css</files>
  <action>
  Verify button-icon.css properly styles SVG icons. Add if not present:

  ```css
  .btn-icon-trigger svg {
      vertical-align: middle;
      fill: currentColor;
  }
  ```

  This ensures SLDS SVG icons inherit color and align properly within the button.
  </action>
  <verify>Visual inspection of icon alignment in browser</verify>
  <done>SVG icons display correctly in button-icon</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] button-icon with data-icon="clock" renders clock SVG
- [ ] button-icon with icon="&#8942;" still works (backward compat)
- [ ] SVG icons properly sized and colored
</verification>

<success_criteria>

- All tasks completed
- button-icon supports both icon (entity) and data-icon (SLDS) attributes
- Backward compatibility maintained
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-icon-replacement/02-02-SUMMARY.md`
</output>
