<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Record Viewer - sftools</title>
        <link rel="icon" type="image/png" href="../../icon.png" />
        <link rel="stylesheet" href="../../style.css" />
    </head>
    <body>
        <record-page></record-page>

        <!-- CORS Error Modal -->
        <modal-popup id="cors-error-modal">
            <div style="padding: 24px; max-width: 600px">
                <h3 style="margin-top: 0; margin-bottom: 16px; color: var(--error-color)">
                    CORS Configuration Required
                </h3>
                <p style="margin-bottom: 16px">
                    To allow the Chrome extension to make requests to your Salesforce org, you need
                    to add a CORS entry or enable the local proxy.
                </p>
                <p style="margin-bottom: 12px; font-weight: 600">
                    Option 1: Configure CORS in Salesforce (Recommended for Quick Setup)
                </p>
                <ol style="margin-bottom: 20px; padding-left: 24px">
                    <li>In Salesforce Setup, search for "CORS"</li>
                    <li>Click "CORS" under Security</li>
                    <li>Click "New" to add an allowed origin pattern</li>
                    <li>
                        Enter:
                        <code
                            style="
                                background: var(--bg-secondary);
                                padding: 2px 6px;
                                border-radius: 3px;
                            "
                            >chrome-extension://mckblnkfhlgocgmehmnihmagmhbnjioj</code
                        >
                    </li>
                    <li>Save the CORS entry</li>
                </ol>
                <p style="margin-bottom: 12px; font-weight: 600">
                    Option 2: Enable Local Proxy (Bypasses CORS Automatically)
                </p>
                <ol style="margin-bottom: 20px; padding-left: 24px">
                    <li>
                        Install
                        <a
                            href="https://nodejs.org/"
                            target="_blank"
                            style="color: var(--primary-color)"
                            >Node.js 18</a
                        >
                        or later
                    </li>
                    <li>
                        Open a terminal in the
                        <code
                            style="
                                background: var(--bg-secondary);
                                padding: 2px 6px;
                                border-radius: 3px;
                            "
                            >sftools-proxy</code
                        >
                        folder
                    </li>
                    <li>
                        Run:
                        <code
                            style="
                                background: var(--bg-secondary);
                                padding: 2px 6px;
                                border-radius: 3px;
                            "
                            >npm run install-host</code
                        >
                    </li>
                    <li>Restart Chrome completely</li>
                    <li>Go to Settings tab and enable the "Local Proxy" toggle</li>
                </ol>
                <div style="text-align: right">
                    <button class="button-brand" id="cors-modal-close">Close</button>
                </div>
            </div>
        </modal-popup>

        <script type="module" src="record.js"></script>
    </body>
</html>
